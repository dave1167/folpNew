{
  "meta": {
    "$_PARAM": [
      {
        "type": "text",
        "name": "htmlIn"
      },
      {
        "type": "text",
        "name": "FirstName"
      },
      {
        "type": "text",
        "name": "LastName"
      },
      {
        "type": "text",
        "name": "Address"
      },
      {
        "type": "text",
        "name": "Address2"
      },
      {
        "type": "text",
        "name": "Town1"
      },
      {
        "type": "text",
        "name": "Town2"
      },
      {
        "type": "text",
        "name": "Pcode"
      },
      {
        "type": "text",
        "name": "memNo"
      },
      {
        "type": "text",
        "name": "currDate"
      }
    ]
  },
  "exec": {
    "steps": [
      {
        "name": "",
        "options": {
          "comment": "format address block\n"
        }
      },
      {
        "name": "AddressBlock",
        "module": "core",
        "action": "setvalue",
        "options": {},
        "meta": [],
        "outputType": "text"
      },
      {
        "name": "AddressBlock",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{AddressBlock+($_PARAM.Address && $_PARAM.Address.trim() ? '<div>' + $_PARAM.Address.trim() + '</div>' : '')}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "AddressBlock",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{AddressBlock+($_PARAM.Address2 && $_PARAM.Address2.trim() ? '<div>' + $_PARAM.Address2.trim() + '</div>' : '')}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "AddressBlock",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{AddressBlock+($_PARAM.Town1 && $_PARAM.Town1.trim() ? '<div>' + $_PARAM.Town1.trim() + '</div>' : '')}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "AddressBlock",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{AddressBlock+($_PARAM.Town2 && $_PARAM.Town2.trim() ? '<div>' + $_PARAM.Town2.trim() + '</div>' : '')}}"
        },
        "meta": [],
        "outputType": "text",
        "collapsed": true,
        "output": true
      },
      {
        "name": "AddressBlock",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{AddressBlock+($_PARAM.Pcode && $_PARAM.Pcode.trim() ? '<div><strong>' + $_PARAM.Pcode.trim() + '</strong></div>' : '')}}"
        },
        "meta": [],
        "outputType": "text",
        "collapsed": true,
        "output": true
      },
      {
        "name": "",
        "options": {
          "comment": "Set Current Date"
        }
      },
      {
        "name": "currDate",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{NOW.formatDate('dd-MM-yyyy', false)}}"
        },
        "meta": [],
        "outputType": "text"
      },
      {
        "name": "",
        "options": {
          "comment": "Set normal fields "
        }
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{$_PARAM.htmlIn}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?FirstName?>', $_PARAM.FirstName)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?LastName?>', $_PARAM.LastName)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?Address?>', $_PARAM.Address)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?Address2?>', $_PARAM.Address2)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true,
        "collapsed": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?Town1?>', $_PARAM.Town1)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?Town2?>', $_PARAM.Town2)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?Pcode?>', $_PARAM.Pcode)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?MemNo?>', $_PARAM.memNo)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?CurrDate?>', currDate)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "htmlOut",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": "{{htmlOut.replace('<?AddressBlock?>', AddressBlock)}}"
        },
        "meta": [],
        "outputType": "text",
        "output": true
      }
    ]
  }
}