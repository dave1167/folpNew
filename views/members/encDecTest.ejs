<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="encDecTest" appConnect="local" components="{dmxFormatter:{}}" -->
<meta name="ac:route" content="/members/encDecTest">
<div class="container py-4">
    <h2 class="mb-4">Server Merge Test (libMergePlaceholders)</h2>
    <div class="row g-4">
        <div class="col-md-6">
            <form id="html_form" class="needs-validation" novalidate>
                <div class="form-group mb-3">
                    <label for="input_html" class="form-label">Paste HTML Input</label>
                    <textarea id="input_html" name="htmlin" class="form-control" rows="10" readonly>Welcome, {{firstname}} {{lastname}}!
Your email is {{email}} and you have been a member for {{years}} years.
Account active: {{is_active}}
Joined: {{joined}}</textarea>
                </div>
                <div class="form-group mb-3">
                    <label for="merge_data" class="form-label">Server Response Output</label>
                    <textarea id="merge_data" name="merge_data" class="form-control" rows="6" readonly dmx-bind:value="merge_test.data.result"></textarea>
                </div>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button type="button" class="btn btn-primary" dmx-on:click="merge_test.load({htmlin: input_html.value})" dmx-bind:disabled="merge_test.state.executing">Test Merge</button>
                </div>
            </form>
        </div>
        <div class="col-md-6">
            <div class="form-group mb-3">
                <label for="preview_box" class="form-label">Merged Output Preview</label>
                <div id="preview_box" class="border rounded bg-body p-3" style="min-height:340px;" dmx-html="merge_test.data.htmlOut.htmlOut">
                    <div dmx-html="merge_test.data.result"></div>
                </div>
            </div>
            <div dmx-show="merge_test.state.executing" class="alert alert-info mb-0"><span class="spinner-border spinner-border-sm me-2"></span>Processing...</div>
        </div>
    </div>
</div>
<dmx-serverconnect id="merge_test" url="/api/testmerge"></dmx-serverconnect>